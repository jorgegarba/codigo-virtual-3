(this["webpackJsonpdidos-react"]=this["webpackJsonpdidos-react"]||[]).push([[0],{23:function(e,a,t){e.exports=t(36)},28:function(e,a,t){},30:function(e,a,t){},36:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),r=t(21),l=t.n(r),o=(t(28),t(14),t(1),function(){return c.a.createElement("header",{className:"header"},c.a.createElement("div",{className:"header__logo"},c.a.createElement("img",{src:"assets/img/logo.svg",alt:""})),c.a.createElement("div",{className:"header__buscador"},c.a.createElement("img",{src:"assets/img/search.svg",alt:""}),c.a.createElement("input",{type:"text",className:"header__input",placeholder:"Busca un t\xe9rmino"})),c.a.createElement("div",{className:"header__usuario"},c.a.createElement("img",{src:"https://randomuser.me/api/portraits/men/90.jpg",alt:""}),c.a.createElement("span",null,"Jorge Garnica")))}),s=function(){return c.a.createElement("nav",{className:"menu"},c.a.createElement("ul",{className:"menu__lista"},c.a.createElement("li",null,c.a.createElement("img",{src:"assets/img/plato_blanco.svg",alt:""}),c.a.createElement("span",null,"Bebidas")),c.a.createElement("li",null,c.a.createElement("img",{src:"assets/img/plato_blanco.svg",alt:""}),c.a.createElement("span",null,"Bebidas")),c.a.createElement("li",null,c.a.createElement("img",{src:"assets/img/plato_blanco.svg",alt:""}),c.a.createElement("span",null,"Bebidas")),c.a.createElement("li",null,c.a.createElement("img",{src:"assets/img/plato_blanco.svg",alt:""}),c.a.createElement("span",null,"Bebidas"))))},i=t(8),u=Object(n.createContext)(),m=function(e){e.objMesa;var a=Object(n.useContext)(u);a.global_mesa_id,a.setMesaActual},d=t(7),_=t.n(d),p=t(9),b="https://api-order-tpv.herokuapp.com/api",E=function(){var e=Object(p.a)(_.a.mark((function e(){var a,t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(b,"/List_All_Tables/"));case 2:return a=e.sent,e.next=5,a.json();case 5:return t=e.sent,e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(n.useState)([]),a=Object(i.a)(e,2),t=a[0],r=a[1];return Object(n.useEffect)((function(){E().then((function(e){r(e)}))}),[]),c.a.createElement("div",{className:"mesas"},c.a.createElement("ul",{className:"mesas__lista"},t.map((function(e){return c.a.createElement(m,{objMesa:e,key:e.id})}))),c.a.createElement("div",{className:"mesas__info"}))},g=function(){var e=Object(p.a)(_.a.mark((function e(){var a,t;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(b,"/List_All_Category/"));case 2:return a=e.sent,e.next=5,a.json();case 5:return t=e.sent,e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(e){var a=e.objCategoria,t=Object(n.useContext)(u),r=t.global_categoria_id,l=t.setCategoriaActual;return c.a.createElement("button",{className:r===+a.id?"btn btn-outline-primary active":"btn btn-outline-primary",onClick:function(){return l(a.id)}},a.name)},A=function(){var e=Object(n.useState)([]),a=Object(i.a)(e,2),t=a[0],r=a[1];return Object(n.useEffect)((function(){g().then((function(e){return r(e)}))}),[]),c.a.createElement("div",{className:"carta__categorias"},t.map((function(e){return c.a.createElement(v,{key:e.id,objCategoria:e})})))},O=t(11),j=t(6),h=function(e,a){switch(a.type){case"CAMBIAR_MESA_ACTUAL":return Object(j.a)(Object(j.a)({},e),{},{global_mesa_id:+a.payload});case"CAMBIAR_CATEGORIA_ACTUAL":return Object(j.a)(Object(j.a)({},e),{},{global_categoria_id:+a.payload});case"AGREGAR_PEDIDO":return Object(j.a)(Object(j.a)({},e),{},{global_pedidos:[].concat(Object(O.a)(e.global_pedidos),[{mesa_id:e.global_mesa_id,platos:[{plato_id:a.payload.plato_id,cant:1,precio:a.payload.plato_pre,nombre:a.payload.plato_nom}]}])});case"AGREGAR_CANTIDAD_PLATO_PEDIDO":case"AGREGAR_PLATO_PEDIDO":return Object(j.a)(Object(j.a)({},e),{},{global_pedidos:Object(O.a)(a.payload)});default:return Object(j.a)({},e)}},N=function(e){var a=Object(n.useReducer)(h,{global_mesa_id:null,global_categoria_id:0,global_pedidos:[]}),t=Object(i.a)(a,2),r=t[0],l=t[1];return c.a.createElement(u.Provider,{value:{global_mesa_id:r.global_mesa_id,global_categoria_id:r.global_categoria_id,global_pedidos:r.global_pedidos,setMesaActual:function(e){l({type:"CAMBIAR_MESA_ACTUAL",payload:e})},setCategoriaActual:function(e){l({type:"CAMBIAR_CATEGORIA_ACTUAL",payload:e})},sumarPedido:function(e,a){var t=a.id,n=a.price,c=a.name;if(r.global_mesa_id){var o=r.global_pedidos.find((function(e){return e.mesa_id===r.global_mesa_id}));if(o){if(o.platos.find((function(e){return+e.plato_id===+t}))){console.log("encontramos un plato previo");var s=Object(O.a)(r.global_pedidos.map((function(e){return+e.mesa_id===+r.global_mesa_id?(e.platos.forEach((function(e){+e.plato_id===+t&&(e.precio=e.precio/e.cant*(e.cant+1),e.cant=e.cant+1)})),e):e})));return void l({type:"sumar"===e?"AGREGAR_CANTIDAD_PLATO_PEDIDO":"RESTAR_CANTIDAD_PLATO_PEDIDO",payload:s})}var i=Object(O.a)(r.global_pedidos.map((function(e){return+e.mesa_id===+r.global_mesa_id?(e.platos.push({plato_id:+t,cant:1,precio:+n,nombre:c}),e):e})));l({type:"AGREGAR_PLATO_PEDIDO",payload:i})}else l({type:"AGREGAR_PEDIDO",payload:{plato_id:t,plato_pre:n,plato_nom:c}})}}}},e.children)},y=function(e){var a=e.objPlato,t=Object(n.useContext)(u).sumarPedido;return c.a.createElement("div",{className:"carta__plato"},c.a.createElement("img",{src:a.photo,alt:""}),c.a.createElement("h4",{className:"carta__titulo"},a.name),c.a.createElement("span",{className:"carta__precio"},"S/ ",a.price),c.a.createElement("div",{className:"carta__botones"},c.a.createElement("button",{className:"btn btn-outline-primary btn-restar"},"-1"),c.a.createElement("button",{className:"btn btn-outline-primary btn-sumar",onClick:function(){t("sumar",a)}},"+1")))},C=function(){var e=Object(p.a)(_.a.mark((function e(a){var t,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(b,"/Category_Item_id/").concat(a));case 2:if(404!==(t=e.sent).status){e.next=5;break}throw"404";case 5:return e.next=7,t.json();case 7:return n=e.sent,e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),D=function(){var e=Object(n.useState)([]),a=Object(i.a)(e,2),t=a[0],r=a[1],l=Object(n.useContext)(u).global_categoria_id;return Object(n.useEffect)((function(){C(l).then((function(e){var a=e.item;r(a)})).catch((function(e){console.log(e)}))}),[l]),0===l?c.a.createElement("span",null,"Seleccione una categor\xeda"):c.a.createElement("div",{className:"carta__platos"},t.map((function(e){return c.a.createElement(y,{objPlato:e,key:e.id})})))},P=function(e){var a=e.objPlato;return c.a.createElement("li",{className:"comanda__item"},c.a.createElement("p",{className:"comanda__nombre"},c.a.createElement("span",null,c.a.createElement("strong",null,a.nombre)),c.a.createElement("span",null,"Precio: S/ ",a.precio/a.cant)),c.a.createElement("p",{className:"comanda__cantidad"},a.cant),c.a.createElement("p",{className:"comanda__precio"},c.a.createElement("strong",null,"S/ ",a.precio)))},R=function(e){var a=e.pedidoMesaActual;return c.a.createElement("ul",{className:"comanda__lista"},a.platos.map((function(e){return c.a.createElement(P,{objPlato:e,key:a.mesa_id+""+e.plato_id})})))},x=function(){var e=Object(n.useState)({}),a=Object(i.a)(e,2),t=a[0],r=a[1],l=Object(n.useContext)(u),o=l.global_mesa_id,s=l.global_pedidos;Object(n.useEffect)((function(){E().then((function(e){r(e.find((function(e){return+e.id===+o})))}))}));var m=s.find((function(e){return e.mesa_id===o}));return c.a.createElement("div",{className:"comanda"},c.a.createElement("h4",{className:"comanda__mesa"},"Mesa: ",+(null===t||void 0===t?void 0:t.number)||"Seleccione una mesa"),c.a.createElement("p",{className:"comanda__usuario"},"Daniel De La Cruz"),c.a.createElement("hr",null),m?c.a.createElement(c.a.Fragment,null,c.a.createElement(R,{pedidoMesaActual:m}),c.a.createElement("button",{className:"btn btn-success"},"PAGAR")):c.a.createElement("span",null,"Mesa libre"))},I=function(){return c.a.createElement(N,null,c.a.createElement(o,null),c.a.createElement("main",{className:"container"},c.a.createElement(s,null),c.a.createElement("section",{className:"tabla"},c.a.createElement(f,null),c.a.createElement("div",{className:"pedido"},c.a.createElement("div",{className:"carta"},c.a.createElement(A,null),c.a.createElement(D,null)),c.a.createElement("div",{className:"boleta"},c.a.createElement("h3",null,"Pedido"),c.a.createElement(x,null))))))},w=(t(30),function(){return c.a.createElement(I,null)});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[23,1,2]]]);
//# sourceMappingURL=main.c4785505.chunk.js.map